<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Moleculator Inc - Calculateur de masse moléculaire</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <!-- jsPDF CDN intégré -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
  <script src="app.js" defer></script>
</head>
<body>
  <header>
    <h1>Moleculator Inc</h1>
    <p>Calcul de la masse moléculaire avec visualisation interactive, quiz pédagogique et export PDF.</p>
  </header>

  <main>
    <section aria-label="Calcul de masse moléculaire">
      <label for="formula-input">Formule chimique :</label>
      <input type="text" id="formula-input" autocomplete="off" aria-describedby="formula-error" placeholder="Ex: C6H12O6" />
      <div id="formula-error" role="alert" aria-live="polite" class="error-message"></div>

      <button id="calc-mass-btn" aria-label="Calculer la masse moléculaire">Calculer</button>
      <div id="mass-result" role="region" aria-live="polite" aria-atomic="true" class="result"></div>

      <div id="molecule-visualization" aria-label="Visualisation moléculaire interactive" tabindex="0" style="touch-action: none;">
        <svg id="molecule-svg" width="100%" height="150" role="img" aria-describedby="mol-desc"></svg>
        <div id="mol-desc" class="sr-only">Visualisation interactive de la molécule</div>
      </div>

      <button id="export-pdf" aria-label="Exporter le résultat en PDF">Exporter le résultat en PDF</button>
    </section>

    <hr />

    <section id="quiz-container" aria-live="polite" aria-atomic="true" aria-label="Quiz pédagogique sur le calcul de masse molaire">
      <h2>Mode Quiz pédagogique</h2>
      <div id="quiz-question" tabindex="0"></div>
      <input type="text" id="quiz-answer" aria-label="Votre réponse en masse molaire (g/mol)" inputmode="decimal" autocomplete="off" placeholder="Entrez la masse molaire" />
      <button id="quiz-submit">Valider</button>
      <div id="quiz-feedback" class="feedback" aria-live="polite"></div>
      <div id="quiz-progress" aria-live="polite" class="progress"></div>
      <button id="quiz-reset">Recommencer le quiz</button>
    </section>

    <hr />

    <section aria-label="Historique des calculs">
      <h2>Historique des calculs récents</h2>
      <ul id="history-list" class="history-list" aria-live="polite"></ul>
    </section>
  </main>

  <footer>
    <small>Moleculator Inc &copy; 2025 - Projet sans backend, 100% côté client</small>
  </footer>

  <!-- Service Worker registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(() => console.log('Service Worker enregistré.'))
          .catch(e => console.error('Erreur SW:', e));
      });
    }
  </script>
</body>
          </html>
    
